<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>TV Show Tracker</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #1e293b 0%, #581c87 50%, #1e293b 100%);
      min-height: 100vh;
      padding: 20px;
      color: #fff;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      background: rgba(30, 41, 59, 0.5);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid rgba(168, 85, 247, 0.2);
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      flex-wrap: wrap;
      gap: 10px;
    }

    h1 {
      font-size: 28px;
      color: #fff;
      margin-bottom: 5px;
    }

    .subtitle {
      color: #d8b4fe;
      font-size: 14px;
    }

    .button {
      background: #7c3aed;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s;
    }

    .button:active {
      transform: scale(0.95);
      background: #6d28d9;
    }

    .button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .button-secondary {
      background: #475569;
    }

    .button-secondary:active {
      background: #334155;
    }

    .button-filter {
      background: #475569;
    }

    .button-filter:active {
      background: #334155;
    }

    .button-filter.active {
      background: #ca8a04;
    }

    .button-available {
      background: #475569;
    }

    .button-available:active {
      background: #334155;
    }

    .button-available.active {
      background: #059669;
    }

    .view-toggle {
      background: rgba(71, 85, 105, 0.5);
      border-radius: 8px;
      padding: 4px;
      display: inline-flex;
      gap: 4px;
    }

    .view-btn {
      background: transparent;
      color: #d8b4fe;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .view-btn.active {
      background: #7c3aed;
      color: white;
    }

    .alert {
      background: rgba(168, 85, 247, 0.2);
      border: 1px solid rgba(168, 85, 247, 0.3);
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 20px;
    }

    .alert-warning {
      background: rgba(234, 179, 8, 0.2);
      border-color: rgba(234, 179, 8, 0.3);
    }

    .alert-success {
      background: rgba(5, 150, 105, 0.2);
      border-color: rgba(5, 150, 105, 0.3);
    }

    .show-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .show-card {
      background: rgba(30, 41, 59, 0.5);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid rgba(71, 85, 105, 0.5);
      cursor: pointer;
      transition: all 0.2s;
    }

    .show-card.selected {
      border-color: rgba(168, 85, 247, 0.5);
      box-shadow: 0 0 20px rgba(168, 85, 247, 0.2);
    }

    .show-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .show-title-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      flex: 1;
    }

    .show-title {
      font-size: 20px;
      font-weight: bold;
    }

    .badge {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      border: 1px solid;
    }

    .badge-new {
      background: rgba(34, 197, 94, 0.2);
      color: #86efac;
      border-color: rgba(34, 197, 94, 0.3);
    }

    .badge-returning {
      background: rgba(59, 130, 246, 0.2);
      color: #93c5fd;
      border-color: rgba(59, 130, 246, 0.3);
    }

    .badge-premiere {
      background: rgba(239, 68, 68, 0.2);
      color: #fca5a5;
      border-color: rgba(239, 68, 68, 0.3);
      animation: pulse 2s infinite;
    }

    .badge-episode {
      background: rgba(249, 115, 22, 0.2);
      color: #fdba74;
      border-color: rgba(249, 115, 22, 0.3);
      animation: pulse 2s infinite;
    }

    .badge-available {
      background: rgba(5, 150, 105, 0.2);
      color: #6ee7b7;
      border-color: rgba(5, 150, 105, 0.3);
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .show-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      font-size: 14px;
    }

    .detail-label {
      color: #94a3b8;
      margin-bottom: 4px;
    }

    .detail-value {
      color: #fff;
      font-weight: 600;
    }

    .countdown {
      color: #d8b4fe;
      margin-top: 10px;
      font-size: 14px;
    }

    .delete-btn {
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
      border: none;
      padding: 8px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
    }

    .delete-btn:active {
      background: rgba(239, 68, 68, 0.2);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      z-index: 1000;
      padding: 20px;
      overflow-y: auto;
    }

    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: #1e293b;
      border-radius: 16px;
      padding: 24px;
      max-width: 500px;
      width: 100%;
      border: 1px solid rgba(168, 85, 247, 0.3);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 24px;
      font-weight: bold;
    }

    .close-btn {
      background: none;
      border: none;
      color: #94a3b8;
      font-size: 28px;
      cursor: pointer;
      line-height: 1;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-label {
      display: block;
      color: #d8b4fe;
      font-size: 14px;
      margin-bottom: 6px;
    }

    .form-input, .form-select {
      width: 100%;
      background: #334155;
      border: 1px solid #475569;
      color: white;
      padding: 10px;
      border-radius: 8px;
      font-size: 14px;
    }

    .form-input:focus, .form-select:focus {
      outline: none;
      border-color: #7c3aed;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .calendar {
      background: rgba(30, 41, 59, 0.5);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(168, 85, 247, 0.2);
    }

    .calendar-header {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
    }

    .calendar-day-header {
      text-align: center;
      color: #d8b4fe;
      font-weight: 600;
      padding: 8px;
      font-size: 14px;
    }

    .calendar-day {
      min-height: 80px;
      border-radius: 8px;
      padding: 8px;
      font-size: 14px;
    }

    .calendar-day.empty {
      background: transparent;
    }

    .calendar-day.has-shows {
      background: rgba(124, 58, 237, 0.2);
      border: 2px solid rgba(168, 85, 247, 0.5);
    }

    .calendar-day.no-shows {
      background: rgba(51, 65, 85, 0.3);
      border: 1px solid rgba(71, 85, 105, 0.3);
    }

    .calendar-day-number {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .calendar-show {
      font-size: 11px;
      padding: 2px 4px;
      border-radius: 4px;
      margin-bottom: 2px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .calendar-show.premiere {
      background: rgba(168, 85, 247, 0.3);
      color: #e9d5ff;
    }

    .calendar-show.episode {
      background: rgba(249, 115, 22, 0.3);
      color: #fed7aa;
    }

    .stats {
      background: rgba(30, 41, 59, 0.3);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 16px;
      margin-top: 20px;
      border: 1px solid rgba(71, 85, 105, 0.5);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 15px;
      text-align: center;
    }

    .stat-label {
      color: #94a3b8;
      font-size: 12px;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: bold;
    }

    .stat-value.purple { color: #a78bfa; }
    .stat-value.green { color: #86efac; }
    .stat-value.red { color: #fca5a5; }
    .stat-value.orange { color: #fdba74; }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="header-top">
        <div>
          <h1>üì∫ TV Show Tracker</h1>
          <div class="subtitle"><span id="showCount">0</span> shows loaded</div>
        </div>
        <div class="button-group">
          <button class="button button-filter" id="filterWeekBtn">This Week</button>
          <button class="button button-available" id="filterAvailableBtn">Available Now</button>
          <button class="button" id="searchBtn">üîç Search Shows</button>
          <button class="button" id="addBtn">+ Add Manual</button>
          <div class="view-toggle">
            <button class="view-btn active" id="listViewBtn">List</button>
            <button class="view-btn" id="calViewBtn">Calendar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Alert -->
    <div id="alert" class="hidden"></div>

    <!-- List View -->
    <div id="listView" class="show-list"></div>

    <!-- Calendar View -->
    <div id="calendarView" class="calendar hidden"></div>

    <!-- Stats -->
    <div class="stats">
      <div class="stats-grid">
        <div>
          <div class="stat-label">Tracking</div>
          <div class="stat-value purple" id="statTracking">0</div>
        </div>
        <div>
          <div class="stat-label">New Shows</div>
          <div class="stat-value green" id="statNew">0</div>
        </div>
        <div>
          <div class="stat-label">Premieres (7d)</div>
          <div class="stat-value red" id="statPremieres">0</div>
        </div>
        <div>
          <div class="stat-label">Episodes (7d)</div>
          <div class="stat-value orange" id="statEpisodes">0</div>
        </div>
      </div>
    </div>

    <!-- Add Show Modal -->
    <div id="addModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-title">Add Show</div>
          <button class="close-btn" id="closeModal">&times;</button>
        </div>
        <form id="addForm">
          <div class="form-group">
            <label class="form-label">Show Title *</label>
            <input type="text" class="form-input" id="inputTitle" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Status</label>
              <select class="form-select" id="inputStatus">
                <option value="new">New</option>
                <option value="returning">Returning</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Season</label>
              <input type="number" class="form-input" id="inputSeason" value="1" min="1">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Type</label>
            <select class="form-select" id="inputType">
              <option value="premiere">Season Premiere</option>
              <option value="episode">New Episode</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Network *</label>
            <input type="text" class="form-input" id="inputNetwork" required>
          </div>
          <div class="form-group">
            <label class="form-label">Air Date *</label>
            <input type="date" class="form-input" id="inputDate" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Day of Week</label>
              <select class="form-select" id="inputDay">
                <option>Monday</option>
                <option>Tuesday</option>
                <option>Wednesday</option>
                <option>Thursday</option>
                <option>Friday</option>
                <option>Saturday</option>
                <option>Sunday</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Time</label>
              <input type="time" class="form-input" id="inputTime" value="20:00">
            </div>
          </div>
          <div class="button-group" style="margin-top: 20px;">
            <button type="submit" class="button" style="flex: 1;">Add Show</button>
            <button type="button" class="button button-secondary" id="cancelBtn" style="flex: 1;">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Search Show Modal -->
    <div id="searchModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-title">Search TV Shows</div>
          <button class="close-btn" id="closeSearchModal">&times;</button>
        </div>
        <div class="form-group">
          <input type="text" class="form-input" id="searchInput" placeholder="Search for any TV show...">
        </div>
        <button class="button" id="searchSubmitBtn" style="width: 100%; margin-bottom: 20px;">Search</button>
        <div id="searchResults" style="max-height: 400px; overflow-y: auto;"></div>
      </div>
    </div>
  </div>

  <script>
    // Initial data
    const initialShows = [
      { id: 1, title: "Scrubs", status: "returning", season: 11, premiereDate: "2026-02-25", network: "ABC", dayOfWeek: "Wednesday", time: "8:00 PM", episodeType: "premiere" },
      { id: 100, title: "The Greatest Average American", status: "new", season: 1, premiereDate: "2026-02-25", network: "ABC", dayOfWeek: "Tuesday", time: "9:00 PM", episodeType: "premiere" },
      { id: 114, title: "Grey's Anatomy", status: "returning", season: 22, premiereDate: "2026-02-26", network: "ABC", dayOfWeek: "Thursday", time: "10:00 PM", episodeType: "episode" },
      { id: 115, title: "Abbott Elementary", status: "returning", season: 5, premiereDate: "2026-02-05", network: "ABC", dayOfWeek: "Wednesday", time: "9:30 PM", episodeType: "episode" },
      { id: 2, title: "The Fall and Rise of Reggie Dinkins", status: "new", season: 1, premiereDate: "2026-02-23", network: "NBC", dayOfWeek: "Monday", time: "8:00 PM", episodeType: "premiere" },
      { id: 101, title: "The Voice", status: "returning", season: 29, premiereDate: "2026-02-23", network: "NBC", dayOfWeek: "Monday", time: "8:00 PM", episodeType: "premiere" },
      { id: 3, title: "CIA", status: "new", season: 1, premiereDate: "2026-02-23", network: "CBS", dayOfWeek: "Monday", time: "10:00 PM", episodeType: "premiere" },
      { id: 4, title: "Y: Marshals", status: "new", season: 1, premiereDate: "2026-03-01", network: "CBS", dayOfWeek: "Sunday", time: "9:00 PM", episodeType: "premiere" },
      { id: 102, title: "FBI", status: "returning", season: 7, premiereDate: "2026-02-23", network: "CBS", dayOfWeek: "Tuesday", time: "8:00 PM", episodeType: "episode" },
      { id: 103, title: "The Neighborhood", status: "returning", season: 8, premiereDate: "2026-02-23", network: "CBS", dayOfWeek: "Monday", time: "8:00 PM", episodeType: "episode" },
      { id: 104, title: "NCIS", status: "returning", season: 23, premiereDate: "2026-02-24", network: "CBS", dayOfWeek: "Monday", time: "9:00 PM", episodeType: "episode" },
      { id: 105, title: "Survivor", status: "returning", season: 50, premiereDate: "2026-02-25", network: "CBS", dayOfWeek: "Wednesday", time: "8:00 PM", episodeType: "premiere" },
      { id: 106, title: "Ghosts", status: "returning", season: 5, premiereDate: "2026-02-26", network: "CBS", dayOfWeek: "Thursday", time: "8:30 PM", episodeType: "episode" },
      { id: 107, title: "Matlock", status: "returning", season: 2, premiereDate: "2026-02-26", network: "CBS", dayOfWeek: "Thursday", time: "9:00 PM", episodeType: "episode" },
      { id: 108, title: "Elsbeth", status: "returning", season: 3, premiereDate: "2026-02-26", network: "CBS", dayOfWeek: "Thursday", time: "10:00 PM", episodeType: "episode" },
      { id: 5, title: "The Night Agent", status: "returning", season: 3, premiereDate: "2026-02-19", network: "Netflix", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 6, title: "The Lincoln Lawyer", status: "returning", season: 4, premiereDate: "2026-02-05", network: "Netflix", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 7, title: "One Piece", status: "returning", season: 2, premiereDate: "2026-03-10", network: "Netflix", dayOfWeek: "Monday", time: "12:00 AM", episodeType: "premiere" },
      { id: 8, title: "Beauty in Black", status: "returning", season: 2, premiereDate: "2026-03-19", network: "Netflix", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 9, title: "Jo Nesb√∏'s Detective Hole", status: "new", season: 1, premiereDate: "2026-03-26", network: "Netflix", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 10, title: "Cash Queens", status: "new", season: 1, premiereDate: "2026-02-14", network: "Netflix", dayOfWeek: "Friday", time: "12:00 AM", episodeType: "premiere" },
      { id: 11, title: "Salvador", status: "new", season: 1, premiereDate: "2026-02-21", network: "Netflix", dayOfWeek: "Friday", time: "12:00 AM", episodeType: "premiere" },
      { id: 109, title: "Bridgerton", status: "returning", season: 4, premiereDate: "2026-02-26", network: "Netflix", dayOfWeek: "Thursday", time: "12:00 AM", episodeType: "episode" },
      { id: 12, title: "Like Water for Chocolate", status: "returning", season: 2, premiereDate: "2026-02-15", network: "HBO Max", dayOfWeek: "Saturday", time: "9:00 PM", episodeType: "premiere" },
      { id: 13, title: "Last Week Tonight with John Oliver", status: "returning", season: 13, premiereDate: "2026-02-15", network: "HBO Max", dayOfWeek: "Sunday", time: "11:00 PM", episodeType: "premiere" },
      { id: 14, title: "Neighbors", status: "new", season: 1, premiereDate: "2026-02-16", network: "HBO Max", dayOfWeek: "Monday", time: "10:00 PM", episodeType: "premiere" },
      { id: 15, title: "Rooster", status: "new", season: 1, premiereDate: "2026-03-15", network: "HBO Max", dayOfWeek: "Saturday", time: "9:00 PM", episodeType: "premiere" },
      { id: 110, title: "Madam Beja", status: "new", season: 1, premiereDate: "2026-02-02", network: "HBO Max", dayOfWeek: "Sunday", time: "9:00 PM", episodeType: "premiere" },
      { id: 111, title: "The Pitt", status: "returning", season: 2, premiereDate: "2026-02-06", network: "HBO Max", dayOfWeek: "Thursday", time: "9:00 PM", episodeType: "episode" },
      { id: 16, title: "Paradise", status: "returning", season: 2, premiereDate: "2026-02-23", network: "Hulu", dayOfWeek: "Sunday", time: "12:00 AM", episodeType: "premiere" },
      { id: 17, title: "The Artful Dodger", status: "returning", season: 2, premiereDate: "2026-02-26", network: "Hulu", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 18, title: "The 'Burbs", status: "new", season: 1, premiereDate: "2026-02-08", network: "Peacock", dayOfWeek: "Saturday", time: "12:00 AM", episodeType: "premiere" },
      { id: 19, title: "Ted", status: "returning", season: 2, premiereDate: "2026-03-05", network: "Peacock", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 112, title: "The Traitors", status: "returning", season: 4, premiereDate: "2026-02-06", network: "Peacock", dayOfWeek: "Thursday", time: "9:00 PM", episodeType: "episode" },
      { id: 20, title: "Can You Keep a Secret?", status: "new", season: 1, premiereDate: "2026-02-12", network: "Paramount+", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 21, title: "Dreaming Whilst Black", status: "returning", season: 2, premiereDate: "2026-02-20", network: "Paramount+", dayOfWeek: "Thursday", time: "12:00 AM", episodeType: "premiere" },
      { id: 22, title: "The Madison", status: "new", season: 1, premiereDate: "2026-03-14", network: "Paramount+", dayOfWeek: "Saturday", time: "12:00 AM", episodeType: "premiere" },
      { id: 23, title: "The Last Thing He Told Me", status: "returning", season: 2, premiereDate: "2026-02-20", network: "Apple TV+", dayOfWeek: "Thursday", time: "12:00 AM", episodeType: "premiere" },
      { id: 24, title: "Monarch: Legacy of Monsters", status: "returning", season: 2, premiereDate: "2026-02-27", network: "Apple TV+", dayOfWeek: "Thursday", time: "12:00 AM", episodeType: "premiere" },
      { id: 25, title: "Imperfect Women", status: "new", season: 1, premiereDate: "2026-03-18", network: "Apple TV+", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 113, title: "Shrinking", status: "returning", season: 3, premiereDate: "2026-02-05", network: "Apple TV+", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "episode" },
      { id: 26, title: "Cross", status: "returning", season: 2, premiereDate: "2026-02-11", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 27, title: "56 Days", status: "new", season: 1, premiereDate: "2026-02-18", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 28, title: "The CEO Club", status: "new", season: 1, premiereDate: "2026-02-23", network: "Prime Video", dayOfWeek: "Sunday", time: "12:00 AM", episodeType: "premiere" },
      { id: 29, title: "The Gray House", status: "new", season: 1, premiereDate: "2026-02-26", network: "Prime Video", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 30, title: "Siren's Kiss", status: "new", season: 1, premiereDate: "2026-03-02", network: "Prime Video", dayOfWeek: "Sunday", time: "12:00 AM", episodeType: "premiere" },
      { id: 31, title: "Young Sherlock", status: "new", season: 1, premiereDate: "2026-03-04", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 32, title: "Scarpetta", status: "new", season: 1, premiereDate: "2026-03-11", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 33, title: "Invincible", status: "returning", season: 4, premiereDate: "2026-03-18", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 34, title: "Jury Duty Presents: Company Retreat", status: "new", season: 1, premiereDate: "2026-03-20", network: "Prime Video", dayOfWeek: "Thursday", time: "12:00 AM", episodeType: "premiere" },
      { id: 35, title: "Deadloch", status: "returning", season: 2, premiereDate: "2026-03-20", network: "Prime Video", dayOfWeek: "Thursday", time: "12:00 AM", episodeType: "premiere" },
      { id: 36, title: "Bait", status: "new", season: 1, premiereDate: "2026-03-25", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 116, title: "Steal", status: "new", season: 1, premiereDate: "2026-01-21", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 117, title: "Lazarus", status: "new", season: 1, premiereDate: "2025-10-22", network: "Prime Video", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 118, title: "Ponies", status: "new", season: 1, premiereDate: "2026-01-15", network: "Peacock", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 119, title: "All Her Fault", status: "new", season: 1, premiereDate: "2025-11-06", network: "Peacock", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 120, title: "The Copenhagen Test", status: "new", season: 1, premiereDate: "2025-12-27", network: "Peacock", dayOfWeek: "Friday", time: "12:00 AM", episodeType: "premiere" },
      { id: 121, title: "Devil in Disguise: John Wayne Gacy", status: "new", season: 1, premiereDate: "2025-10-16", network: "Peacock", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 122, title: "Run Away", status: "new", season: 1, premiereDate: "2026-01-01", network: "Netflix", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 123, title: "His & Hers", status: "new", season: 1, premiereDate: "2026-01-08", network: "Netflix", dayOfWeek: "Wednesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 124, title: "Stranger Things", status: "returning", season: 5, premiereDate: "2025-11-26", network: "Netflix", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 125, title: "Squid Game: The Challenge", status: "returning", season: 2, premiereDate: "2025-11-04", network: "Netflix", dayOfWeek: "Monday", time: "12:00 AM", episodeType: "premiere" },
      { id: 126, title: "Down Cemetery Road", status: "new", season: 1, premiereDate: "2025-10-29", network: "Apple TV+", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },
      { id: 127, title: "Coldwater", status: "new", season: 1, premiereDate: "2026-01-09", network: "Paramount+", dayOfWeek: "Thursday", time: "12:00 AM", episodeType: "premiere" },
      { id: 128, title: "Murdaugh: Death in the Family", status: "new", season: 1, premiereDate: "2025-10-15", network: "Hulu", dayOfWeek: "Tuesday", time: "12:00 AM", episodeType: "premiere" },

      // Fox - Season Premieres & Episodes
      { id: 129, title: "Animal Control", status: "returning", season: 4, premiereDate: "2026-01-28", network: "Fox", dayOfWeek: "Tuesday", time: "8:00 PM", episodeType: "premiere" },
      { id: 130, title: "Memory of a Killer", status: "new", season: 1, premiereDate: "2026-01-26", network: "Fox", dayOfWeek: "Monday", time: "9:00 PM", episodeType: "premiere" },
      { id: 137, title: "Doc", status: "returning", season: 2, premiereDate: "2026-02-04", network: "Fox", dayOfWeek: "Tuesday", time: "9:00 PM", episodeType: "premiere" },
      { id: 131, title: "Going Dutch", status: "returning", season: 2, premiereDate: "2026-02-11", network: "Fox", dayOfWeek: "Tuesday", time: "9:30 PM", episodeType: "premiere" },
      { id: 132, title: "The Masked Singer", status: "returning", season: 14, premiereDate: "2026-02-05", network: "Fox", dayOfWeek: "Wednesday", time: "8:00 PM", episodeType: "episode" },
      { id: 133, title: "The Simpsons", status: "returning", season: 36, premiereDate: "2026-02-15", network: "Fox", dayOfWeek: "Saturday", time: "8:00 PM", episodeType: "episode" },
      { id: 134, title: "Family Guy", status: "returning", season: 24, premiereDate: "2026-02-22", network: "Fox", dayOfWeek: "Saturday", time: "8:00 PM", episodeType: "premiere" },
      { id: 135, title: "American Dad!", status: "returning", season: 20, premiereDate: "2026-02-22", network: "Fox", dayOfWeek: "Saturday", time: "9:00 PM", episodeType: "premiere" },
      { id: 136, title: "The Faithful", status: "new", season: 1, premiereDate: "2026-03-22", network: "Fox", dayOfWeek: "Saturday", time: "8:00 PM", episodeType: "premiere" }
    ];

    // Load saved data from localStorage
    function loadFromStorage() {
      try {
        const savedShows = localStorage.getItem('tvTrackerShows');
        const savedSelected = localStorage.getItem('tvTrackerSelected');

        if (savedShows) {
          const parsed = JSON.parse(savedShows);
          // Convert date strings back to Date objects
          return parsed.map(show => ({
            ...show,
            premiereDate: show.premiereDate // Keep as string for consistency
          }));
        }

        return null;
      } catch (e) {
        console.error('Error loading from storage:', e);
        return null;
      }
    }

    function loadSelectedFromStorage() {
      try {
        const savedSelected = localStorage.getItem('tvTrackerSelected');
        if (savedSelected) {
          return new Set(JSON.parse(savedSelected));
        }
        return null;
      } catch (e) {
        console.error('Error loading selected from storage:', e);
        return null;
      }
    }

    // Save to localStorage
    function saveToStorage() {
      try {
        localStorage.setItem('tvTrackerShows', JSON.stringify(shows));
        localStorage.setItem('tvTrackerSelected', JSON.stringify([...selectedShows]));
      } catch (e) {
        console.error('Error saving to storage:', e);
      }
    }

    // State - Load from storage or use defaults
    let shows = loadFromStorage() || [...initialShows];
    let selectedShows = loadSelectedFromStorage() || new Set(shows.map(s => s.id));
    let filterMode = 'none'; // 'none', 'week', 'available'
    let currentView = 'list';
    const currentDate = new Date('2026-02-01');

    // Helper functions
    function getDaysUntil(dateStr) {
      const date = new Date(dateStr);
      const diff = date - currentDate;
      return Math.ceil(diff / (1000 * 60 * 60 * 24));
    }

    function formatDate(dateStr) {
      const date = new Date(dateStr);
      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    }

    async function searchShows() {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) return;

      const searchBtn = document.getElementById('searchSubmitBtn');
      searchBtn.textContent = 'Searching...';
      searchBtn.disabled = true;

      try {
        const response = await fetch(`https://api.tvmaze.com/search/shows?q=${encodeURIComponent(query)}`);
        const data = await response.json();
        displaySearchResults(data);
      } catch (error) {
        console.error('Search error:', error);
        document.getElementById('searchResults').innerHTML = '<p style="color: #ef4444; text-align: center; padding: 20px;">Error searching. Please try again.</p>';
      } finally {
        searchBtn.textContent = 'Search';
        searchBtn.disabled = false;
      }
    }

    function displaySearchResults(results) {
      const container = document.getElementById('searchResults');

      if (results.length === 0) {
        container.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 20px;">No results found. Try a different search.</p>';
        return;
      }

      container.innerHTML = results.map(result => {
        const show = result.show;
        const network = show.webChannel?.name || show.network?.name || 'Unknown Network';
        const premiered = show.premiered ? new Date(show.premiered).getFullYear() : 'Unknown';
        const summary = show.summary ? show.summary.replace(/<[^>]*>/g, '').substring(0, 150) + '...' : 'No description available.';

        return `
          <div style="background: rgba(51, 65, 85, 0.5); border-radius: 8px; padding: 15px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s;"
               onmouseover="this.style.background='rgba(71, 85, 105, 0.7)'"
               onmouseout="this.style.background='rgba(51, 65, 85, 0.5)'"
               onclick="addShowFromSearch(${show.id}, '${show.name.replace(/'/g, "\\'")}', '${network.replace(/'/g, "\\'")}', '${premiered}')">
            <div style="font-weight: bold; font-size: 16px; margin-bottom: 5px;">${show.name}</div>
            <div style="color: #94a3b8; font-size: 14px; margin-bottom: 8px;">${network} ‚Ä¢ Premiered ${premiered}</div>
            <div style="color: #cbd5e1; font-size: 13px;">${summary}</div>
            <div style="color: #10b981; font-size: 12px; margin-top: 8px; font-weight: 600;">Click to add ‚Üí</div>
          </div>
        `;
      }).join('');
    }

    function addShowFromSearch(tvmazeId, title, network, premiered) {
      // Estimate premiere date (you can change this later manually)
      const today = new Date();
      const estimatedDate = new Date(today.getFullYear(), today.getMonth() + 1, 1);
      const dateStr = estimatedDate.toISOString().split('T')[0];

      const newShow = {
        id: Date.now(),
        title: title,
        status: premiered && parseInt(premiered) < 2026 ? 'returning' : 'new',
        season: 1,
        premiereDate: dateStr,
        network: network,
        dayOfWeek: 'Monday',
        time: '8:00 PM',
        episodeType: 'premiere'
      };

      shows.push(newShow);
      selectedShows.add(newShow.id);
      saveToStorage(); // Save after adding
      document.getElementById('searchModal').classList.remove('show');
      document.getElementById('searchInput').value = '';
      document.getElementById('searchResults').innerHTML = '';
      render();
    }

    function getFilteredShows() {
      if (filterMode === 'none') return shows;

      if (filterMode === 'week') {
        return shows.filter(show => {
          if (!selectedShows.has(show.id)) return false;
          const days = getDaysUntil(show.premiereDate);
          return days >= 0 && days <= 7;
        });
      }

      if (filterMode === 'available') {
        return shows.filter(show => {
          if (!selectedShows.has(show.id)) return false;
          const days = getDaysUntil(show.premiereDate);
          return days < 0; // Already premiered/aired
        });
      }

      return shows;
    }

    function updateStats() {
      const tracking = selectedShows.size;
      const newShows = shows.filter(s => s.status === 'new' && selectedShows.has(s.id)).length;
      const premieres = shows.filter(s => {
        if (!selectedShows.has(s.id)) return false;
        const days = getDaysUntil(s.premiereDate);
        return days >= 0 && days <= 7 && s.episodeType === 'premiere';
      }).length;
      const episodes = shows.filter(s => {
        if (!selectedShows.has(s.id)) return false;
        const days = getDaysUntil(s.premiereDate);
        return days >= 0 && days <= 7 && s.episodeType === 'episode';
      }).length;

      document.getElementById('statTracking').textContent = tracking;
      document.getElementById('statNew').textContent = newShows;
      document.getElementById('statPremieres').textContent = premieres;
      document.getElementById('statEpisodes').textContent = episodes;
      document.getElementById('showCount').textContent = shows.length;
    }

    function updateAlert() {
      const alertEl = document.getElementById('alert');
      const upcomingCount = shows.filter(show => {
        if (!selectedShows.has(show.id)) return false;
        const days = getDaysUntil(show.premiereDate);
        return days >= 0 && days <= 7;
      }).length;

      if (filterMode === 'week') {
        const filteredCount = getFilteredShows().length;
        alertEl.className = 'alert alert-warning';
        alertEl.innerHTML = `‚è∞ Showing ${filteredCount} show${filteredCount !== 1 ? 's' : ''} with new episodes in the next 7 days`;
        alertEl.classList.remove('hidden');
      } else if (filterMode === 'available') {
        const filteredCount = getFilteredShows().length;
        alertEl.className = 'alert alert-success';
        alertEl.innerHTML = `‚úÖ Showing ${filteredCount} show${filteredCount !== 1 ? 's' : ''} available to watch now`;
        alertEl.classList.remove('hidden');
      } else if (upcomingCount > 0) {
        alertEl.className = 'alert';
        alertEl.innerHTML = `üîî ${upcomingCount} show${upcomingCount !== 1 ? 's' : ''} with new content in the next 7 days!`;
        alertEl.classList.remove('hidden');
      } else {
        alertEl.classList.add('hidden');
      }
    }

    function renderListView() {
      const container = document.getElementById('listView');
      const filtered = getFilteredShows();

      container.innerHTML = filtered.map(show => {
        const isSelected = selectedShows.has(show.id);
        const daysUntil = getDaysUntil(show.premiereDate);
        const isUpcoming = daysUntil >= 0 && daysUntil <= 7;
        const isAvailable = daysUntil < 0;
        const isEpisode = show.episodeType === 'episode';

        let countdown = '';
        if (isSelected) {
          if (daysUntil < 0) {
            countdown = 'Available to watch now!';
          } else if (daysUntil === 0) {
            countdown = isEpisode ? 'New episode TODAY!' : 'Premieres TODAY!';
          } else {
            countdown = `${isEpisode ? 'New episode' : 'Premieres'} in ${daysUntil} day${daysUntil !== 1 ? 's' : ''}`;
          }
        }

        return `
          <div class="show-card ${isSelected ? 'selected' : ''}" data-id="${show.id}">
            <div class="show-header">
              <div class="show-title-row">
                <div class="show-title">${show.title}</div>
                <span class="badge badge-${show.status}">${show.status === 'new' ? '‚ú® NEW' : '‚Ü∫ RETURNING'}</span>
                ${isSelected && isAvailable ? '<span class="badge badge-available">AVAILABLE</span>' : ''}
                ${isSelected && isUpcoming ? `<span class="badge badge-${isEpisode ? 'episode' : 'premiere'}">${isEpisode ? 'NEW EPISODE' : 'PREMIERE'}</span>` : ''}
                <span style="color: ${isSelected ? '#facc15' : '#475569'}; font-size: 20px;">${isSelected ? '‚òÖ' : '‚òÜ'}</span>
              </div>
              <button class="delete-btn" data-id="${show.id}" data-action="delete">√ó</button>
            </div>
            <div class="show-details">
              <div>
                <div class="detail-label">Season</div>
                <div class="detail-value">Season ${show.season}</div>
              </div>
              <div>
                <div class="detail-label">Network</div>
                <div class="detail-value" style="color: #d8b4fe;">${show.network}</div>
              </div>
              <div>
                <div class="detail-label">${isEpisode ? 'Next Episode' : 'Premiere Date'}</div>
                <div class="detail-value">${formatDate(show.premiereDate)}</div>
              </div>
              <div>
                <div class="detail-label">Airs</div>
                <div class="detail-value">${show.dayOfWeek}s at ${show.time}</div>
              </div>
            </div>
            ${isSelected ? `<div class="countdown">‚è∞ ${countdown}</div>` : ''}
          </div>
        `;
      }).join('');
    }

    function renderCalendarView() {
      const container = document.getElementById('calendarView');
      const year = 2026;
      const month = 1; // February
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const startDayOfWeek = firstDay.getDay();
      const daysInMonth = lastDay.getDate();

      const days = [];
      for (let i = 0; i < startDayOfWeek; i++) {
        days.push(null);
      }
      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        const dateStr = date.toISOString().split('T')[0];
        const showsOnDay = shows.filter(show => {
          if (!selectedShows.has(show.id)) return false;
          return show.premiereDate === dateStr;
        });
        days.push({ day, shows: showsOnDay });
      }

      const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

      container.innerHTML = `
        <div class="calendar-header">üìÖ February 2026</div>
        <div class="calendar-grid">
          ${dayHeaders.map(d => `<div class="calendar-day-header">${d}</div>`).join('')}
          ${days.map(d => {
            if (!d) return '<div class="calendar-day empty"></div>';
            const hasShows = d.shows.length > 0;
            return `
              <div class="calendar-day ${hasShows ? 'has-shows' : 'no-shows'}">
                <div class="calendar-day-number">${d.day}</div>
                ${d.shows.map(show =>
                  `<div class="calendar-show ${show.episodeType}" title="${show.title} - ${show.episodeType === 'episode' ? 'New Episode' : 'Premiere'}">${show.title}</div>`
                ).join('')}
              </div>
            `;
          }).join('')}
        </div>
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(71, 85, 105, 0.5);">
          <div style="font-weight: 600; margin-bottom: 10px;">Legend</div>
          <div style="display: flex; gap: 20px; font-size: 14px;">
            <div style="display: flex; align-items: center; gap: 8px;">
              <div style="width: 12px; height: 12px; border-radius: 50%; background: #a78bfa;"></div>
              <span>Season Premiere</span>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <div style="width: 12px; height: 12px; border-radius: 50%; background: #f97316;"></div>
              <span>New Episode</span>
            </div>
          </div>
        </div>
      `;
    }

    function render() {
      if (currentView === 'list') {
        document.getElementById('listView').classList.remove('hidden');
        document.getElementById('calendarView').classList.add('hidden');
        renderListView();
      } else {
        document.getElementById('listView').classList.add('hidden');
        document.getElementById('calendarView').classList.remove('hidden');
        renderCalendarView();
      }
      updateStats();
      updateAlert();
    }

    // Event listeners
    document.getElementById('listView').addEventListener('click', (e) => {
      const card = e.target.closest('.show-card');
      if (!card) return;

      if (e.target.dataset.action === 'delete') {
        e.stopPropagation();
        const id = parseInt(e.target.dataset.id);
        shows = shows.filter(s => s.id !== id);
        selectedShows.delete(id);
        saveToStorage(); // Save after deleting
        render();
        return;
      }

      const id = parseInt(card.dataset.id);
      if (selectedShows.has(id)) {
        selectedShows.delete(id);
      } else {
        selectedShows.add(id);
      }
      saveToStorage(); // Save after toggling
      render();
    });

    document.getElementById('filterWeekBtn').addEventListener('click', () => {
      if (filterMode === 'week') {
        filterMode = 'none';
        document.getElementById('filterWeekBtn').classList.remove('active');
      } else {
        filterMode = 'week';
        document.getElementById('filterWeekBtn').classList.add('active');
        document.getElementById('filterAvailableBtn').classList.remove('active');
      }
      render();
    });

    document.getElementById('filterAvailableBtn').addEventListener('click', () => {
      if (filterMode === 'available') {
        filterMode = 'none';
        document.getElementById('filterAvailableBtn').classList.remove('active');
      } else {
        filterMode = 'available';
        document.getElementById('filterAvailableBtn').classList.add('active');
        document.getElementById('filterWeekBtn').classList.remove('active');
      }
      render();
    });

    document.getElementById('listViewBtn').addEventListener('click', () => {
      currentView = 'list';
      document.getElementById('listViewBtn').classList.add('active');
      document.getElementById('calViewBtn').classList.remove('active');
      render();
    });

    document.getElementById('calViewBtn').addEventListener('click', () => {
      currentView = 'calendar';
      document.getElementById('calViewBtn').classList.add('active');
      document.getElementById('listViewBtn').classList.remove('active');
      render();
    });

    document.getElementById('addBtn').addEventListener('click', () => {
      document.getElementById('addModal').classList.add('show');
    });

    document.getElementById('closeModal').addEventListener('click', () => {
      document.getElementById('addModal').classList.remove('show');
    });

    document.getElementById('cancelBtn').addEventListener('click', () => {
      document.getElementById('addModal').classList.remove('show');
    });

    document.getElementById('addForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const newShow = {
        id: Date.now(),
        title: document.getElementById('inputTitle').value,
        status: document.getElementById('inputStatus').value,
        season: parseInt(document.getElementById('inputSeason').value),
        premiereDate: document.getElementById('inputDate').value,
        network: document.getElementById('inputNetwork').value,
        dayOfWeek: document.getElementById('inputDay').value,
        time: document.getElementById('inputTime').value,
        episodeType: document.getElementById('inputType').value
      };
      shows.push(newShow);
      selectedShows.add(newShow.id);
      saveToStorage(); // Save after adding
      document.getElementById('addModal').classList.remove('show');
      document.getElementById('addForm').reset();
      render();
    });

    // Search modal event listeners
    document.getElementById('searchBtn').addEventListener('click', () => {
      document.getElementById('searchModal').classList.add('show');
    });

    document.getElementById('closeSearchModal').addEventListener('click', () => {
      document.getElementById('searchModal').classList.remove('show');
      document.getElementById('searchInput').value = '';
      document.getElementById('searchResults').innerHTML = '';
    });

    document.getElementById('searchSubmitBtn').addEventListener('click', searchShows);

    document.getElementById('searchInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        searchShows();
      }
    });

    // Initial render
    render();
  </script>
</body>
</html>
